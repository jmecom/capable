module string_index
use sys::system
use sys::console

pub fn main(rc: RootCap) -> i32 {
  let c = rc.mint_console()

  // Test basic string indexing
  let s = "hello"
  let first = s[0]
  if (first != 104u8) {  // 'h' is 104
    c.println("FAIL: first")
    return 1
  }
  c.println("first ok")

  // Test middle character
  let middle = s[2]
  if (middle != 108u8) {  // 'l' is 108
    c.println("FAIL: middle")
    return 1
  }
  c.println("middle ok")

  // Test last character
  let last = s[4]
  if (last != 111u8) {  // 'o' is 111
    c.println("FAIL: last")
    return 1
  }
  c.println("last ok")

  // Test indexing with variable
  let i = 1
  let at_i = s[i]
  if (at_i != 101u8) {  // 'e' is 101
    c.println("FAIL: var index")
    return 1
  }
  c.println("var index ok")

  c.println("string_index ok")
  return 0
}
