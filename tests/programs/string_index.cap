module string_index
use sys::system
use sys::console

pub fn main(rc: RootCap) -> i32 {
  let c = rc.mint_console()

  // Test basic string indexing
  let s = "hello"
  let first = s[0]
  if (first != 'h') {  // expect 'h'
    c.println("FAIL: first")
    return 1
  }
  c.println("first ok")

  // Test middle character
  let middle = s[2]
  if (middle != 'l') {  // expect 'l'
    c.println("FAIL: middle")
    return 1
  }
  c.println("middle ok")

  // Test last character
  let last = s[4]
  if (last != 'o') {  // expect 'o'
    c.println("FAIL: last")
    return 1
  }
  c.println("last ok")

  // Test indexing with variable
  let i = 1
  let at_i = s[i]
  if (at_i != 'e') {  // expect 'e'
    c.println("FAIL: var index")
    return 1
  }
  c.println("var index ok")

  c.println("string_index ok")
  return 0
}
