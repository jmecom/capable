package safe
module result_construct
use sys::system

pub fn main(sys: RootCap) -> i32 {
  let c = sys.mint_console()
  let a = make(true)
  let b = make(false)

  match (a) {
    Ok(s) => {
      sys.assert(s.len() == 5)
      c.println(s)
    }
    Err(e) => {
      sys.assert(false)
      c.println("bad a")
      return 1
    }
  }

  match (b) {
    Ok(s) => {
      sys.assert(false)
      c.println("bad b")
      return 1
    }
    Err(e) => {
      sys.assert(e == 7)
      c.print_i32(e)
      c.println("")
    }
  }

  return 0
}

fn make(ok: bool) -> Result[string, i32] {
  if (ok) {
    return Ok("hello")
  } else {
    return Err(7)
  }
}
