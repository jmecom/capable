module fs_traversal_kind
use sys.system
use sys.fs
use sys.console

pub fn main(sys: System) -> i32 {
  let c = system.console(sys)
  let rfs = system.fs_read(sys, "./config")

  match fs.read_to_string(rfs, "../secrets.txt") {
    Ok(s) => { console.println(c, "BUG: escaped"); return 2 }
    Err(e) => {
      if (e == fs.FsErr.InvalidPath) { console.println(c, "invalid"); return 0 }
      console.println(c, "wrong"); return 1
    }
  }
}
