module fs_traversal_kind
use sys::system
use sys::fs

pub fn main(rc: RootCap) -> i32 {
  let c = rc.mint_console()
  let rfs = rc.mint_readfs("./config")

  match rfs.read_to_string("../secrets.txt") {
    Ok(s) => {
      c.assert(false)
      c.println("BUG: escaped")
      return 2
    }
    Err(e) => {
      c.assert(e == fs::FsErr::InvalidPath)
      if (e == fs::FsErr::InvalidPath) {
        c.println("invalid")
        return 0
      }
      c.println("wrong")
      return 1
    }
  }
}
