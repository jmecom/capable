package safe
module stdin_safe
use sys::system

pub fn main(rc: RootCap) -> i32 {
  let c = rc.mint_console()
  let stdin = rc.mint_stdin()
  let alloc = rc.mint_alloc_default()
  let code = match stdin.read_to_string(alloc) {
    Ok(s) => {
      let n = s.len()
      c.assert(n == 0)
      if (n == 0) {
        c.println("stdin ok")
      } else {
        c.println("stdin data")
      }
      0
    }
    Err(e) => {
      c.println("stdin err")
      1
    }
  }
  return code
}
