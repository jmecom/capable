package safe
module vec_helpers
use sys::system

pub fn main(sys: RootCap) -> i32 {
  let c = sys.mint_console()
  let alloc = sys.alloc_default()
  let v = alloc.vec_u8_new()
  match v.push(65u8) {
    Ok(x) => {}
    Err(e) => { c.println("vec bad"); return 1 }
  }
  match v.push(66u8) {
    Ok(x) => {}
    Err(e) => { c.println("vec bad"); return 1 }
  }
  let len = v.len()
  let b = v.get(1)
  match (b) {
    Ok(x) => {
      if (len == 2 && x == 66u8) {
        c.println("vec ok")
        alloc.vec_u8_free(v)
        return 0
      }
    }
    Err(e) => {}
  }
  c.println("vec bad")
  alloc.vec_u8_free(v)
  return 1
}
