package safe
module result_unit_ok
use sys::system

pub fn main(sys: RootCap) -> i32 {
  let c = sys.mint_console()
  let alloc = sys.mint_alloc_default()
  match alloc.buffer_new(1) {
    Ok(b) => {
      let ok = match b.push(42u8) {
        Ok(unit_val) => { 1 }
        Err(e) => { 0 }
      }
      sys.assert(ok == 1)
      c.println("result unit ok - got Ok(unit)")
      alloc.buffer_free(b)
      return 0
    }
    Err(e) => {
      c.println("buffer new failed")
      return 1
    }
  }
}
