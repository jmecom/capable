package safe
module string_helpers
use sys::system

pub fn main(rc: RootCap) -> i32 {
  let c = rc.mint_console()
  let s = "abc"
  let buf = s.bytes()
  let n = buf.len()
  let b = buf.at(0)
  let words = "a b  c".split_whitespace()
  let count = words.len()
  let trimmed = "  hi \n".trim()
  let trimmed_start = "  hi ".trim_start()
  let trimmed_end = "  hi ".trim_end()
  let lines = "a\nb\n".split_lines()
  let alloc = rc.mint_alloc_default()
  alloc.vec_string_free(words)
  alloc.vec_string_free(lines)
  c.assert(n == 3 && b == 97u8 && count == 3)
  c.assert(trimmed.len() == 2)
  c.assert(trimmed.starts_with_byte(104u8))
  c.assert(trimmed.ends_with_byte(105u8))
  c.assert(trimmed_start.starts_with("hi"))
  c.assert(trimmed_end.ends_with("hi"))
  c.assert("abc".starts_with_byte(97u8))
  c.assert("abc".ends_with_byte(99u8))
  c.println("string ok")
  return 0
}
